<!doctype html><html lang="pt-BR"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>NFC Access</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:"Inter",system-ui,Arial,sans-serif}
body{height:100vh;background:#020617;color:#fff;overflow:hidden;display:flex;align-items:center;justify-content:center;text-align:center;position:relative}
.bg{position:fixed;inset:0;z-index:-2;background:radial-gradient(circle at 30% 30%,#0f172a,#000)}
.grid{position:absolute;inset:0;background-image:linear-gradient(90deg,rgba(255,255,255,.03) 1px,transparent 1px),linear-gradient(rgba(255,255,255,.03) 1px,transparent 1px);background-size:40px 40px;animation:gridMove 10s linear infinite}
@keyframes gridMove{to{background-position:40px 40px,40px 40px}}
.beam{position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(115deg,transparent 45%,rgba(0,242,255,.08) 50%,transparent 55%);animation:beamMove 6s ease-in-out infinite;z-index:-1}
@keyframes beamMove{0%,100%{transform:translate(-30%,-30%) rotate(25deg)}50%{transform:translate(30%,30%) rotate(25deg)}}
h1{font-size:1.8rem;margin-bottom:.5rem}
p{color:#9ca3af;font-size:.95rem;margin-bottom:1.8rem}
button{background:linear-gradient(90deg,#06b6d4,#3b82f6);color:#fff;border:none;border-radius:1.5rem;padding:1rem 2rem;font-size:1rem;font-weight:700;cursor:pointer;transition:.3s;box-shadow:0 6px 25px rgba(59,130,246,.35)}
button:active{transform:scale(.96)}
#msg{margin-top:2rem;min-height:2.5rem;font-size:1.2rem;font-weight:600;opacity:0;transition:opacity 1s ease,transform .6s ease}
#msg.show{opacity:1;transform:scale(1.05)}
.ok{color:#22c55e;animation:pulse 1.2s infinite alternate}
.err{color:#ef4444}
@keyframes pulse{to{transform:scale(1.08);opacity:.8}}
.splash{position:fixed;inset:0;background:linear-gradient(180deg,#1e3a8a,#1e40af,#0f172a);display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;z-index:10;animation:fadeIn .8s ease}
.splash h1{font-size:2rem;margin-bottom:1rem}
.splash button{margin-top:2rem;padding:1.2rem 2.8rem;font-size:1.1rem;border-radius:2rem;background:linear-gradient(90deg,#06b6d4,#3b82f6);animation:pulseBtn 2s infinite alternate}
@keyframes pulseBtn{to{transform:scale(1.05);box-shadow:0 0 20px rgba(59,130,246,.4)}}
.wave{width:70px;height:70px;border:4px solid rgba(255,255,255,.2);border-top-color:#38bdf8;border-radius:50%;animation:spin 1.4s linear infinite;margin-bottom:1rem}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes fadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}
@keyframes fadeOut{to{opacity:0;transform:scale(1.05)}}
.welcome{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(10px);display:flex;flex-direction:column;align-items:center;justify-content:center;opacity:0;transform:scale(.9);transition:all .6s ease;z-index:9;pointer-events:none}
.welcome.show{opacity:1;transform:scale(1)}
.icon{width:90px;height:90px;border-radius:50%;border:4px solid #22c55e;position:relative;animation:popIn .5s ease forwards}
.icon::after{content:"";position:absolute;left:22px;top:35px;width:22px;height:40px;border-right:4px solid #22c55e;border-bottom:4px solid #22c55e;transform:rotate(45deg) scale(0);transform-origin:bottom left;animation:check .5s ease .3s forwards}
.icon.err{border-color:#ef4444}
.icon.err::after{left:28px;top:25px;width:30px;height:30px;border:none;transform:rotate(45deg);background:linear-gradient(to bottom right,transparent 45%,#ef4444 45%,#ef4444 55%,transparent 55%)}
@keyframes popIn{from{transform:scale(0);opacity:0}to{transform:scale(1);opacity:1}}
@keyframes check{to{transform:rotate(45deg) scale(1)}}
.welcome h2{margin-top:2.5rem;font-size:1.6rem;font-weight:700}
.bg::after{content:"";position:absolute;inset:0;background:linear-gradient(120deg,transparent 0%,rgba(255,255,255,.08) 50%,transparent 100%);animation:shine 10s linear infinite;mix-blend-mode:overlay}
@keyframes shine{to{transform:translateX(100%)}}
audio{display:none}

/* menu minimalista */
.menu-btn{position:absolute;top:20px;right:25px;font-size:1.8rem;cursor:pointer;user-select:none;z-index:20;transition:.3s}
.menu-btn:hover{opacity:.8}
.menu{position:absolute;top:60px;right:25px;background:rgba(15,23,42,.96);border:1px solid rgba(255,255,255,.1);border-radius:.8rem;box-shadow:0 8px 25px rgba(0,0,0,.4);overflow:hidden;transform:scale(0);transform-origin:top right;transition:transform .25s ease;z-index:19;min-width:200px}
.menu.show{transform:scale(1)}
.menu button{display:block;width:100%;border:none;background:none;color:#e5e7eb;padding:1rem 1.4rem;text-align:left;font-size:.95rem;cursor:pointer;transition:.2s}
.menu button:hover{background:rgba(255,255,255,.07)}
.menu .danger{color:#f87171}
.menu .danger:hover{background:rgba(248,113,113,.15)}

/* modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;opacity:0;pointer-events:none;transition:.3s}
.modal.show{opacity:1;pointer-events:auto}
.modal-content{background:#1e293b;padding:2rem;border-radius:1rem;width:320px;max-height:70vh;overflow:auto;text-align:left}
.modal-content h3{text-align:center;margin-bottom:1rem}
.user-item{display:flex;justify-content:space-between;align-items:center;margin:.4rem 0}
.user-item span{font-size:.95rem}
.user-item button{padding:.2rem .7rem;font-size:.8rem;border-radius:.5rem}

/* anima√ß√£o estilo assassin‚Äôs creed */
.loader{position:relative;width:100px;height:100px;margin:0 auto}
.loader span{position:absolute;top:50%;left:50%;width:6px;height:6px;background:#38bdf8;border-radius:50%;transform-origin:center;animation:orbit 2.4s linear infinite}
@keyframes orbit{0%{transform:rotate(0deg) translateX(30px) scale(1)}50%{transform:rotate(180deg) translateX(30px) scale(.6)}100%{transform:rotate(360deg) translateX(30px) scale(1)}}
.loader span:nth-child(2){animation-delay:.3s}
.loader span:nth-child(3){animation-delay:.6s}
.loader span:nth-child(4){animation-delay:.9s}
.loader span:nth-child(5){animation-delay:1.2s}
.loader span:nth-child(6){animation-delay:1.5s}
.loader span:nth-child(7){animation-delay:1.8s}
.loader span:nth-child(8){animation-delay:2.1s}
</style>

<body>
<div class="bg"><div class="grid"></div><div class="beam"></div></div>
<div class="splash" id="splash"><div class="wave"></div><h1>üîê NFC Access</h1><p>Precisamos da sua permiss√£o para acessar o sensor NFC</p><button id="allowBtn">Iniciar e Permitir Leitura NFC</button></div>
<main style="opacity:0;transition:opacity .6s ease;">
  <div class="menu-btn" id="menuBtn">‚ò∞</div>
  <div class="menu" id="menu">
    <button id="viewBtn">Ver / Editar Cadastros</button>
    <button id="clearBtn" class="danger">Excluir Tudo</button>
  </div>
  <h1>üîê NFC Access</h1>
  <p id="info">Aproxime seu cart√£o NFC</p>
  <div class="loader" id="loader">
    <span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span>
  </div>
  <div id="msg"></div>
</main>
<div class="welcome" id="welcome"><div class="icon"></div><h2 id="welcomeText">Bem-vindo!</h2></div>
<div class="modal" id="modal"><div class="modal-content"><h3>Cadastros</h3><div id="userList"></div></div></div>
<audio id="beep" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
(()=>{const $=id=>document.getElementById(id),LS='nfc_users_v1';let reader,msgTimer;
function db(){try{return JSON.parse(localStorage.getItem(LS)||'{}')}catch{return{}}}
function save(d){localStorage.setItem(LS,JSON.stringify(d))}
function showMsg(t,c=''){const e=$('msg');clearTimeout(msgTimer);e.style.transition='none';e.style.opacity='0';e.offsetHeight;e.className='show '+c;e.textContent=t;e.style.transition='opacity .5s ease,transform .6s ease';e.style.opacity='1';e.style.transform='scale(1.05)';msgTimer=setTimeout(()=>{e.style.transition='opacity 1.2s ease';e.style.opacity='0';setTimeout(()=>{e.className='';e.textContent=''},1200)},6000)}
function playSound(){const a=$('beep');a.currentTime=0;a.play().catch(()=>{})}
function vibrate(ms){if('vibrate'in navigator)navigator.vibrate(ms)}
function showWelcome(t,err=false){const w=$('welcome'),i=w.querySelector('.icon'),tx=$('welcomeText');i.className=err?'icon err':'icon';tx.textContent=t;tx.style.color=err?'#ef4444':'#22c55e';w.style.transition='none';w.style.opacity='0';w.offsetHeight;w.classList.add('show');w.style.transition='opacity .6s ease';w.style.opacity='1';setTimeout(()=>{w.style.opacity='0';setTimeout(()=>w.classList.remove('show'),800)},2500)}
async function startNFC(){if(!('NDEFReader'in window)){showMsg('NFC n√£o suportado','err');return;}
try{reader=new NDEFReader();await reader.scan();showMsg('Aguardando cart√£o...');
reader.onreading=async e=>{const id=e.serialNumber||Math.random().toString(36).slice(2,8),users=db();
if(users[id]){showMsg('‚úÖ Bem-vindo, '+users[id]+'!','ok');playSound();showWelcome('Bem-vindo '+users[id]+'!')}
else{showMsg('‚õî Cart√£o n√£o cadastrado','err');vibrate(250);showWelcome('Acesso Negado',true);
setTimeout(async()=>{if(confirm('Cart√£o n√£o encontrado. Deseja cadastrar este cart√£o?')){const nome=prompt('Digite seu nome para cadastro:');if(nome){users[id]=nome;save(users);showMsg('‚úÖ '+nome+' cadastrado!','ok');showWelcome('Cadastrado!',false);}}},3000);}};}catch(e){showMsg('Erro ou permiss√£o negada','err');console.error(e);}}
$('allowBtn').onclick=async()=>{$('allowBtn').disabled=true;$('allowBtn').style.opacity='.5';setTimeout(async()=>{await startNFC();$('splash').style.animation='fadeOut .5s forwards';setTimeout(()=>{$('splash').remove();document.querySelector('main').style.opacity=1;},500)},200)};
/* menu */
const menu=$('menu'),menuBtn=$('menuBtn'),modal=$('modal'),list=$('userList');
menuBtn.onclick=()=>menu.classList.toggle('show');
window.onclick=e=>{if(!menu.contains(e.target)&&e.target!==menuBtn)menu.classList.remove('show');}
$('viewBtn').onclick=()=>{menu.classList.remove('show');const users=db();list.innerHTML='';if(!Object.keys(users).length){list.innerHTML='<p style="text-align:center;color:#9ca3af;">Nenhum cadastro</p>'}
else for(const [id,nome] of Object.entries(users)){const div=document.createElement('div');div.className='user-item';div.innerHTML=`<span>${nome}</span>
<div><button onclick="(()=>{const novo=prompt('Novo nome para ${nome}:', '${nome}');if(novo){const u=${JSON.stringify(users)};u['${id}']=novo;localStorage.setItem('${LS}',JSON.stringify(u));location.reload();}})()">Editar</button>
<button onclick="(()=>{if(confirm('Excluir ${nome}?')){const u=${JSON.stringify(users)};delete u['${id}'];localStorage.setItem('${LS}',JSON.stringify(u));location.reload();}})()">Excluir</button></div>`;list.appendChild(div);}
modal.classList.add('show');}
modal.onclick=e=>{if(e.target===modal)modal.classList.remove('show');}
$('clearBtn').onclick=()=>{menu.classList.remove('show');if(confirm('Tem certeza que deseja excluir TODOS os cadastros?')){localStorage.removeItem(LS);showMsg('Todos os cadastros foram exclu√≠dos','err');}}
})();
</script>
</body></html>
